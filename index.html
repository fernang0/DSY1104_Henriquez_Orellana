<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LevelUp</title>
    <!-- Google Fonts: Roboto & Orbitron -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Importar m√≥dulos JavaScript -->
    <script src="js/auth.js"></script>
    <script src="js/gamification.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/productos_levelup.js"></script>
    <script src="js/categorias_lavelup.js"></script>
    <script src="js/test-utils.js"></script>
    <script src="js/hero-carousel.js"></script>
</head>
<body>
    <header class="site-header">
    <div class="container nav-bar">
      <a class="brand" href="./" aria-label="Ir al inicio">
        <div class="logo" aria-hidden="true">
          <img src="images/logo.png" alt="" width="40" height="40">
        </div>
        <span class="brand-text">LevelUp</span>
      </a>

      <nav class="primary-nav" aria-label="Principal">
        <ul class="menu">
          <li><a href="./" aria-current="page">Inicio</a></li>
          <li><a href="./productos.html">Productos</a></li>
          <li><a href="./blogs.html">Blogs</a></li>
          <li><a href="./nosotros.html">Nosotros</a></li>
          <li><a href="./contacto.html">Contacto</a></li>
        </ul>
      </nav>

      <div class="nav-actions">
        <!-- Informaci√≥n de usuario logueado -->
        <div id="user-info" class="user-info" style="display: none;">
          <span id="user-greeting">Hola, Usuario</span>
          <span id="user-points" class="points-display">0 pts</span>
        </div>

        <!-- Bot√≥n de inicio de sesi√≥n -->
        <a href="./login.html" class="nav-login-btn" aria-label="Iniciar sesi√≥n">
          <span class="user-icon">‚ö°</span>
          <span class="login-text">Iniciar Sesi√≥n</span>
        </a>
        
        <!-- Bot√≥n del carrito con contador -->
        <button class="btn-icon cart-btn" type="button" aria-label="Abrir carrito" id="cart-toggle">
          <span class="cart-icon">üõí</span>
          <span class="badge" id="cart-count" aria-live="polite">0</span>
        </button>

        <!-- Bot√≥n del men√∫ m√≥vil -->
        <button class="nav-toggle" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="mobile-menu">
          <span class="hamburger-icon">‚ò∞</span>
        </button>
      </div>

      <!-- Men√∫ m√≥vil accesible -->
      <div class="nav-drawer" id="mobile-menu" role="navigation" aria-label="Men√∫ m√≥vil">
        <div class="drawer-content">
          <ul class="menu">
            <li><a href="./" aria-current="page">Inicio</a></li>
            <li><a href="./productos.html">Productos</a></li>
            <li><a href="./blogs.html">Blogs</a></li>
            <li><a href="./nosotros.html">Nosotros</a></li>
            <li><a href="./contacto.html">Contacto</a></li>
            <li><a href="./login.html" class="login-mobile">‚ö° Iniciar Sesi√≥n</a></li>
          </ul>
        </div>
      </div>
    </div>    </header>
    <main>
        <!-- Hero Carousel -->
        <section class="hero-carousel">
            <div class="carousel-container">
                <div class="carousel-track" id="heroTrack">
                    <div class="carousel-slide active" style="background-image: url('images/hero-1.jpg');">
                        <div class="carousel-content">
                            <h1>Tu siguiente partida comienza aqu√≠</h1>
                            <p>Descubre los √∫ltimos videojuegos, consolas y accesorios gaming</p>
                            <div class="carousel-buttons">
                                <a href="./productos.html?cat=JM" class="btn btn-primary btn-lg">Explorar Cat√°logo</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" style="background-image: url('images/hero-2.jpg');">
                        <div class="carousel-content">
                            <h1>Potencia tu experiencia gaming</h1>
                            <p>Las mejores consolas y accesorios para llevar tu juego al siguiente nivel</p>
                            <div class="carousel-buttons">
                                <a href="./productos.html?cat=CO" class="btn btn-primary btn-lg">Ver Consolas</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" style="background-image: url('images/hero-3.jpg');">
                        <div class="carousel-content">
                            <h1>Equ√≠pate como un pro</h1>
                            <p>Accesorios gaming de alta calidad para maximizar tu rendimiento</p>
                            <div class="carousel-buttons">
                                <a href="./productos.html?cat=AC" class="btn btn-primary btn-lg">Ver Accesorios</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" style="background-image: url('images/hero-4.jpg');">
                        <div class="carousel-content">
                            <h1>Diversi√≥n sin l√≠mites</h1>
                            <p>Juegos de mesa y entretenimiento para toda la familia</p>
                            <div class="carousel-buttons">
                                <a href="./productos.html?cat=JM" class="btn btn-primary btn-lg">Ver Juegos</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Controles del carousel -->
                <button class="carousel-btn carousel-btn-prev" id="prevBtn" aria-label="Slide anterior">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15,18 9,12 15,6"></polyline>
                    </svg>
                </button>
                <button class="carousel-btn carousel-btn-next" id="nextBtn" aria-label="Slide siguiente">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="9,18 15,12 9,6"></polyline>
                    </svg>
                </button>
                
                <!-- Indicadores -->
                <div class="carousel-dots" id="carouselDots">
                    <button class="carousel-dot active" data-slide="0" aria-label="Ir al slide 1"></button>
                    <button class="carousel-dot" data-slide="1" aria-label="Ir al slide 2"></button>
                    <button class="carousel-dot" data-slide="2" aria-label="Ir al slide 3"></button>
                    <button class="carousel-dot" data-slide="3" aria-label="Ir al slide 4"></button>
                </div>
            </div>
        </section>
   
        <!-- Secci√≥n de acceso r√°pido -->
        <section class="login-banner" id="loginBanner">
            <div class="container">
                <div class="login-banner-content">
                    <div class="login-info">
                        <h2>üéÆ ¬°√önete a la comunidad gaming!</h2>
                        <p>Registrate para obtener puntos, descuentos exclusivos y acceso a contenido premium</p>
                    </div>
                    <div class="login-actions">
                        <a href="./login.html" class="btn btn-primary">Iniciar Sesi√≥n</a>
                        <a href="./registro.html" class="btn btn-outline">Registrarse</a>
                        <button class="btn-close" id="closeBanner" aria-label="Cerrar banner de inicio de sesi√≥n">√ó</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contenido principal aqu√≠ -->
      <section class="categories">
        <div class="container">
          <h2 class="section-title">Explora nuestras categor√≠as</h2>
          <ul class="tiles" aria-label="Listado de categor√≠as de productos gaming">
            <li><a class="tile" href="./productos.html?cat=JM">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/board-games.svg')"></div>
              <strong>Juegos de Mesa</strong>
              <span class="muted">Estrategia y diversi√≥n</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=AC">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/gamepad.svg')"></div>
              <strong>Accesorios</strong>
              <span class="muted">Mejora tu setup</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=CO">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/play5.svg')"></div>
              <strong>Consolas</strong>
              <span class="muted">Nueva generaci√≥n</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=CG">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/pc.svg')"></div>
              <strong>Computadores Gamers</strong>
              <span class="muted">Alto rendimiento</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=SG">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/silla.svg')"></div>
              <strong>Sillas Gamers</strong>
              <span class="muted">M√°ximo confort</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=MS">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/mouse.svg')"></div>
              <strong>Mouse</strong>
              <span class="muted">Precisi√≥n profesional</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=MP">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/mousepad.svg')"></div>
              <strong>Mousepad</strong>
              <span class="muted">Control perfecto</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=PP">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/tshirt.svg')"></div>
              <strong>Poleras Personalizadas</strong>
              <span class="muted">Tu estilo gaming</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=PG">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/hoodie.svg')"></div>
              <strong>Polerones Gamers</strong>
              <span class="muted">Dise√±os √∫nicos</span>
            </a></li>
            <li><a class="tile" href="./productos.html?cat=ST">
              <div class="icon" aria-hidden="true" style="background-image: url('icons/support.svg')"></div>
              <strong>Servicio T√©cnico</strong>
              <span class="muted">Soporte especializado</span>
            </a></li>
          </ul>
        </div>
      </section>
    </main>
    
    <!-- Carrito lateral -->
    <div id="cart-sidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3>Mi Carrito</h3>
            <button class="cart-close" id="cart-close" aria-label="Cerrar carrito">‚úï</button>
        </div>
        <div class="cart-content" id="cart-content">
            <!-- Contenido del carrito se carga din√°micamente -->
        </div>
    </div>
    
    <!-- Men√∫ de usuario desplegable -->
    <div id="user-dropdown" class="user-dropdown" style="display: none;">
        <a href="perfil.html">Mi Perfil</a>
        <a href="#" id="logout-btn">Cerrar Sesi√≥n</a>
    </div>
    
    <footer>
        <small>&copy; 2025 LevelUp. Todos los derechos reservados.</small>
    </footer>

    <script>
        // Inicializaci√≥n del sistema cuando carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Inicializar sistemas
            const authSystem = new AuthSystem();
            const gamificationSystem = new GamificationSystem();
            const cartSystem = new CartSystem();
            
            // Verificar si hay usuario logueado
            const currentUser = authSystem.getCurrentUser();
            updateUserInterface(currentUser, gamificationSystem);
            
            // Configurar eventos del carrito
            setupCartEvents(cartSystem);
            
            // Configurar eventos de autenticaci√≥n
            setupAuthEvents(authSystem);
        }

        function updateUserInterface(user, gamificationSystem) {
            const authMenuItem = document.getElementById('auth-menu-item');
            const authLink = document.getElementById('auth-link');
            const userInfo = document.getElementById('user-info');
            const userGreeting = document.getElementById('user-greeting');
            const userPoints = document.getElementById('user-points');

            if (user) {
                // Usuario logueado
                authLink.textContent = user.firstName || 'Mi Cuenta';
                authLink.href = 'perfil.html';
                
                // Mostrar informaci√≥n del usuario
                userInfo.style.display = 'block';
                userGreeting.textContent = `Hola, ${user.firstName || 'Usuario'}`;
                
                // Mostrar puntos si est√°n disponibles
                const gameData = gamificationSystem.getUserGameData(user.email);
                userPoints.textContent = `${gameData.points} pts`;
                
                // A√±adir men√∫ desplegable
                authLink.addEventListener('click', function(e) {
                    if (e.target.getAttribute('href') === 'perfil.html') {
                        e.preventDefault();
                        toggleUserDropdown();
                    }
                });
            } else {
                // Usuario no logueado
                authLink.textContent = 'Iniciar Sesi√≥n';
                authLink.href = 'login.html';
                userInfo.style.display = 'none';
            }
        }

        function setupCartEvents(cartSystem) {
            const cartToggle = document.getElementById('cart-toggle');
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartClose = document.getElementById('cart-close');
            
            // Abrir carrito
            cartToggle.addEventListener('click', function() {
                cartSidebar.classList.add('active');
                cartSystem.renderCart();
            });
            
            // Cerrar carrito
            cartClose.addEventListener('click', function() {
                cartSidebar.classList.remove('active');
            });
            
            // Cerrar carrito al hacer clic fuera
            cartSidebar.addEventListener('click', function(e) {
                if (e.target === cartSidebar) {
                    cartSidebar.classList.remove('active');
                }
            });
            
            // Actualizar contador del carrito
            cartSystem.updateCartCount();
        }

        function setupAuthEvents(authSystem) {
            const logoutBtn = document.getElementById('logout-btn');
            
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    authSystem.logout();
                    window.location.reload();
                });
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
    </script>
    
    <!-- Scripts -->
    <script src="js/cart.js"></script>
    <script src="js/login-banner.js"></script>
</body>
</html>
